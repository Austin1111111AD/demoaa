import{I as lt,D as Z,N as it,S as rt,l as ct,n as dt}from"./vant-5f97787a.js";import{_ as ut}from"./index.vue_vue_type_script_setup_true_lang-62d1ff9b.js";import{u as L,a as J}from"./index-95894b94.js";import{g as mt,s as _t,a as pt,p as K}from"./index-ce6118a3.js";import{r as m,k as gt,c as A,e as ft,f as vt,d as N,W as y,Z as T,A as $,Y as B,$ as Q,_ as t,a1 as d,L as j,u as w,i as tt,a2 as et,a3 as st,X as ht,G as X,a0 as H}from"./@vue-c5f66650.js";import{p as O}from"./index-e4b38ddf.js";import{u as wt}from"./vue-i18n-2fe8389c.js";import{a as xt}from"./index-59843b39.js";import{_ as bt}from"./index.vue_vue_type_script_setup_true_lang-cf2d7ff0.js";import{m as I}from"./@vant-c8e639f3.js";import{_ as M}from"./_plugin-vue_export-helper-c27b6911.js";import"./fingerprintjs2-27767ee1.js";import"./lodash-es-49819c82.js";import"./vue-router-f78a80c2.js";import"./pinia-a8d55d6d.js";import"./vue-demi-71ba0ef2.js";import"./axios-21b846bc.js";import"./nprogress-04df37a5.js";import"./call-bind-e8177675.js";import"./get-intrinsic-e274f0e2.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-61637ca6.js";import"./has-6793fb5d.js";import"./qs-66f627ff.js";import"./side-channel-03e5a04d.js";import"./object-inspect-7cf6216f.js";import"./crypto-js-629c9af4.js";import"./@lucky-canvas-76d62434.js";import"./pinia-plugin-persistedstate-02097300.js";import"./@intlify-eb5de8e7.js";function $t(){const o=m(0),a=m(0);let s=0,l=0,u=0;function n(c){if(s===0){s=c,u=c,requestAnimationFrame(n);return}const _=c-s;s=c,a.value=Math.round(_),l++,c-u>=1e3&&(o.value=l,l=0,u=c),requestAnimationFrame(n)}return gt(()=>{requestAnimationFrame(n)}),{fps:o,frameInterval:a}}const Y=5;function yt(){const{fps:o}=$t(),a=m(0),s=m(0),l=m(0),[u,n]=I(!0),c=m(),_=h=>{n(!1),a.value=h.total,s.value=h.time,l.value=h.total},g=()=>{if(!o.value){setTimeout(()=>{g()},300);return}n(!0);const h=a.value/s.value/o.value;let v=0;const e=Date.now(),i=()=>{v+=h,l.value=Math.min(parseFloat(v==null?void 0:v.toFixed(2)),a.value),l.value<a.value?(s.value>Y&&Date.now()-e>Y*1e3&&n(!1),c.value=requestAnimationFrame(i)):(l.value=a.value,n(!1))};c.value=requestAnimationFrame(i)};return{total:a,time:s,count:l,disabled:u,init:_,startCounting:g,stopCounting:()=>{cancelAnimationFrame(c.value)}}}const kt=()=>{const o=m(""),a=m(),s=m(),l=m(),u=m(),n=m(!1),c=L(),_=A(()=>c.tradingGet),g=async()=>{var i,r;const{data:e}=await mt();o.value=`(${((i=e==null?void 0:e.row)==null?void 0:i.current)??0}/${((r=e==null?void 0:e.row)==null?void 0:r.total)??0})`},f=()=>{var e;n.value=!0,setTimeout(()=>{_t(1).then(({data:i})=>{var r,x;(r=i==null?void 0:i.row)!=null&&r.id&&((x=a==null?void 0:a.value)==null||x.handleShow(i==null?void 0:i.row))}).catch(()=>{var i,r;(r=(i=l.value)==null?void 0:i.handleClose)==null||r.call(i)}).finally(()=>n.value=!1)},((e=_.value)==null?void 0:e.startTaskDelay)||0)},h=()=>{n.value=!0,pt().then(({data:e})=>{var i,r,x;n.value=!1,(i=e==null?void 0:e.row)!=null&&i.id?(x=(r=l.value)==null?void 0:r.handleShow)==null||x.call(r,e.row):f()}).finally(()=>{n.value=!1})},v=()=>{var e;g(),(e=u.value)==null||e.getInfo()};return g(),{taskAndTotal:o,TaskDialogRef:a,ProfitRef:u,AwardDialogRef:s,FirstAwardDialogRef:l,startLoading:n,handleReset:v,handleStartTask:f,handleAwardAndSrartTask:h}},St=()=>{const o=m([]),a=L(),s=A(()=>a.tradingGet);return(async()=>{var u,n,c,_,g,f;(u=s.value)!=null&&u.serviceTimeRange&&((n=s.value)==null?void 0:n.serviceTimeRange.length)>=1?o.value.push((c=s.value)==null?void 0:c.serviceTimeRange[0]):o.value.push("09:00"),(_=s.value)!=null&&_.serviceTimeRange&&((g=s.value)==null?void 0:g.serviceTimeRange.length)>=2?o.value.push((f=s.value)==null?void 0:f.serviceTimeRange[1]):o.value.push("22:00")})(),{serviceTimeRange:o}},Tt=()=>{const o=m(null),a=m(!1),s=m(),l=m(0),u=ft({pageNo:1,pageSize:6,categoryId:1,enabled:1,"order.direction":"ASC","order.field":"RAND()"}),n=m([]),c=m([]),_=async()=>{a.value=!0;const{data:e}=await O(u).finally(()=>{a.value=!1});n.value=(e==null?void 0:e.rows)??[]},g=async()=>{a.value=!0;const{data:e}=await O({...u,t:new Date().getTime()}).finally(()=>{a.value=!1});c.value=(e==null?void 0:e.rows)??[]},f=()=>{o.value=window.setInterval(()=>{l.value===0?g().then(()=>{var e;(e=s.value)==null||e.next()}):_().then(()=>{var e;(e=s.value)==null||e.next()})},5e3)},h=()=>{o.value&&clearInterval(o.value),o.value=null},v=e=>{if(e===0){const i=setTimeout(()=>{var r;(r=s.value)==null||r.swipeTo(0),clearTimeout(i)},500)}l.value=e};return vt(()=>{h()}),_(),g(),f(),{swipeRef:s,swiperList:c,onChange:v,spusList:n,listLoading:a}},At=()=>{const o=m([]);return(async()=>{const{data:s}=await xt({pageNo:1,pageSize:100,enabled:1,status:"1",given:"1"});o.value=(s==null?void 0:s.rows)??[]})(),{awardsBulletin:o}},Ct="/png/award-bg-7203de02.png",Rt=o=>(et("data-v-54584be9"),o=o(),st(),o),Dt={class:"award-dialog"};const Ft={class:"relative flex flex-col min-h-[320px] items-center text-[#FC3E11] font-semibold"},Bt=Rt(()=>t("img",{class:"w-full max-w-full absolute left-0 top-0 -z-10",src:Ct,alt:""},null,-1)),It={class:"relative z-10 text-center text-sm max-w-[200px]"},Nt={class:"pt-6 text-[#F9A452]"},Lt={class:"pt-2"},Ut={class:"pt-4 text-3xl font-bold"},Gt={class:"text-sm"},Pt=N({name:"award-dialog"}),jt=N({...Pt,emits:["start"],setup(o,{expose:a,emit:s}){const[l,u]=I(),[n,c]=I(),_=m({}),g=L(),f=A(()=>g.website),h=r=>{_.value=r,u(!0)},v=()=>{u(!1)},e=async()=>{n.value||(c(!0),K().finally(()=>{c(!1),v(),s("start")}))},i=()=>{n.value||(v(),s("start"))};return a({handleShow:h,handleClose:v}),(r,x)=>{const U=lt,R=Z;return y(),T("div",Dt,[$(R,{show:w(l),"onUpdate:show":x[2]||(x[2]=k=>tt(l)?l.value=k:null),showConfirmButton:!1},{default:B(()=>{var k;return[Q("",!0),t("div",Ft,[Bt,t("div",It,[t("div",Nt,d(r.$t("starting.award.title[0]")),1),t("div",Lt,d(r.$t("starting.award.title[1]")),1),t("div",Ut,[j(d(_.value.amount??"-")+" ",1),t("span",Gt,d((k=f.value)==null?void 0:k.currencyUnit),1)])]),t("div",{class:"mt-auto translate-y-[80px] w-[200px] h-12 leading-[2.5rem] text-lg bg-[url(@/assets/images/starting/btn.png)] bg-[length:100%_100%] text-center",onClick:x[1]||(x[1]=D=>e())},d(r.$t("starting.award.btn")),1)])]}),_:1},8,["show"])])}}});const zt=M(jt,[["__scopeId","data-v-54584be9"]]),Et="/png/title-62b47e68.png",ot=o=>(et("data-v-f35f9049"),o=o(),st(),o),Mt={class:"first-award-dialog"},qt={key:0,class:"w-full h-screen flex items-center justify-center"},Vt=ot(()=>t("img",{class:"mx-auto w-full h-auto object-cover",src:"https://wotlkoss.oss-ap-southeast-1.aliyuncs.com/20240706/1230ee1fd8312c9eab5782c1c2e5a563.gif",alt:""},null,-1)),Wt=[Vt],Xt={key:1,class:"py-4"},Ht={class:"overflow-y-auto max-h-screen pb-8"},Ot={class:"w-11/12 mx-auto bg-[#222222] flex items-center mt-4 p-4 rounded-lg"},Yt={class:"text-white w-10"},Zt={class:"flex items-center ml-auto shrink-0 pl-2"},Jt={class:"text-2xl text-white font-semibold"},Kt={class:"text-white/80 text-xs ml-1"},Qt={class:"mt-6 bg-[url(@/assets/images/starting/bg-3.png)] bg-[length:100%_100%] text-center"},te=ot(()=>t("div",{class:"pb-6"},[t("img",{class:"w-8/12 mx-auto max-w-xs",src:Et,alt:""})],-1)),ee={class:"mb-10 text-[#ECB8FF] font-semibold text-xl"},se={class:"relative pt-2 pb-20"},oe={class:"text-[60px] leading-[80px] text-transparent font-black flex items-center justify-center",style:{background:"linear-gradient(to bottom, #fff778, #c98900)","-webkit-background-clip":"text","-webkit-text-fill-color":"transparent","background-clip":"text"}},ae={class:"self-end pb-4 ml-4 text-sm"},ne={class:"w-11/12 mx-auto"},le={class:"text-[#FFB621] mt-6 text-center text-xl"},ie=N({name:"first-award-dialog"}),re=N({...ie,emits:["start"],setup(o,{expose:a,emit:s}){const[l,u]=I(!1),[n,c]=I(!1),[_,g]=I(),{startCounting:f,init:h,count:v,disabled:e}=yt(),i=m({}),r=J(),x=L(),U=A(()=>r.accountGet),R=A(()=>x.websiteGet),k=b=>{i.value=b,h({total:b.amount,time:b.animationDuration??0,count:0}),u(!0),c(!0),z()},D=()=>{u(!1)},z=()=>{setTimeout(()=>{c(!1),f()},8e3)},G=async()=>{_.value||e.value||(g(!0),K().then(()=>{r.setAccount(),D(),s("start")}).finally(()=>{g(!1)}))};return a({handleShow:k,handleClose:D}),(b,p)=>{const C=Z;return y(),T("div",Mt,[$(C,{show:w(l),"onUpdate:show":p[1]||(p[1]=S=>tt(l)?l.value=S:null),showConfirmButton:!1,"overlay-style":{background:"#000000"}},{default:B(()=>{var S,P;return[w(n)?(y(),T("div",qt,Wt)):(y(),T("div",Xt,[t("div",Ht,[t("div",Ot,[t("div",Yt,d(b.$t("starting.WalletBalance.title")),1),t("div",Zt,[t("div",Jt,d(U.value.availableBalance??"-"),1),t("div",Kt,d((S=R.value)==null?void 0:S.currencyUnit),1)])]),t("div",Qt,[te,t("div",ee,d(b.$t("starting.firstAward.title[0]")),1),t("div",se,[t("div",oe,[t("div",null,d(w(v)),1),t("div",ae,d((P=R.value)==null?void 0:P.currencyUnit),1)])])]),t("div",ne,[t("div",le,d(b.$t("starting.firstAward.title[1]")),1),t("div",{class:"mx-10 text-[#78330A] h-[70px] leading-[70px] text-center font-bold text-2xl rounded-full mt-6 bg-[url(@/assets/images/starting/btn-2.png)] bg-[length:100%_100%]",onClick:p[0]||(p[0]=E=>G())},d(b.$t("starting.firstAward.btn")),1)])])]))]}),_:1},8,["show"])])}}});const ce=M(re,[["__scopeId","data-v-f35f9049"]]),de={class:"starting"},ue={class:"pb-4"},me={class:"w-11/12 mx-auto py-2"},_e={class:"text-2xl text-black font-bold pb-2"},pe={class:"text-main"},ge={class:"bg-white rounded-sm flex items-center px-2.5 h-11 my-4 w-11/12 mx-auto"},fe=["src"],ve={class:"text-sm font-bold ml-1"},he={class:"py-0.5 px-1.5 text-white ml-auto bg-main rounded-md font-bold text-sm"},we={class:"mt-4 pb-10 w-11/12 mx-auto"},xe={class:"text-black font-bold text-xl pb-4"},be={class:""},$e={class:"w-full grid grid-cols-3 gap-2 p-4 min-h-[14rem] bg-[url(@/assets/images/starting/bg-2.png)] bg-no-repeat bg-[length:100%_100%]"},ye={class:"shadow-[0_0_14px_1px_rgba(0,0,0,0.1)] bg-white p-2 overflow-hidden rounded-xl"},ke={class:"rounded-xl overflow-hidden"},Se=["src"],Te={class:"w-full grid grid-cols-3 gap-2 p-4 min-h-[14rem] bg-[url(@/assets/images/starting/bg-2.png)] bg-no-repeat bg-[length:100%_100%]"},Ae={class:"shadow-[0_0_14px_1px_rgba(0,0,0,0.1)] bg-white p-2 overflow-hidden rounded-xl"},Ce={class:"rounded-xl overflow-hidden"},Re=["src"],De={class:"mt-6"},Fe={class:"font-semibold text-lg"},Be={class:"ml-2"},Ie={class:"bg-white rounded-md shadow mt-6 px-4 py-2"},Ne={class:"mb-2 text-center border-b border-solid border-[#ccc] pb-2"},Le={class:"text-black text-xl font-bold"},Ue={class:"text-black/80 text-sm text-center"},Ge={class:"mb-2"},Pe=N({name:"starting"}),je=N({...Pe,setup(o){const a=L(),s=J(),{spusList:l,swiperList:u,swipeRef:n,onChange:c}=Tt(),_=A(()=>s.memberGet);a.setWebsite(),a.setTrading();const g=A(()=>a.websiteGet),f=A(()=>{var p;return(p=_.value)==null?void 0:p.level}),{taskAndTotal:h,AwardDialogRef:v,ProfitRef:e,TaskDialogRef:i,startLoading:r,FirstAwardDialogRef:x,handleReset:U,handleAwardAndSrartTask:R,handleStartTask:k}=kt();s.setAccount(),s.setMember();const{t:D}=wt(),{awardsBulletin:z}=At(),G=A(()=>{var p;return(p=z.value)==null?void 0:p.map(C=>{var S;return D("home.awardsBulletin",[C.memberUsername,C.amount,(S=g.value)==null?void 0:S.currencyUnit])}).join(" ")}),{serviceTimeRange:b}=St();return(p,C)=>{var q,V,W;const S=it,P=ut,E=rt,at=ct,nt=dt;return y(),T("div",de,[G.value?(y(),ht(S,{key:0,text:G.value,color:"#333",background:"#fff",scrollable:!0},null,8,["text"])):Q("",!0),t("div",ue,[t("div",me,[t("div",_e,[j(d(p.$t("starting.Hi"))+" ",1),t("span",pe,d(_.value.username),1),j(" "+d(p.$t("starting.WelcomeBack"))+" 👋 ",1)]),$(P,{ref_key:"ProfitRef",ref:e},null,512)]),t("div",ge,[t("img",{class:"w-6 h-6",src:(q=f.value)==null?void 0:q.icon,alt:""},null,8,fe),t("div",ve,d((V=f.value)==null?void 0:V.name),1),t("div",he,d(p.$t("starting.profit"))+"x"+d((W=f.value)==null?void 0:W.commissionPercentage)+"% ",1)]),t("div",we,[t("div",xe,d(p.$t("starting.StartOptimization")),1),t("div",be,[$(at,{ref_key:"swipeRef",ref:n,onChange:w(c),"show-indicators":!1,loop:!0,width:"100%",touchable:!1},{default:B(()=>[$(E,{class:""},{default:B(()=>[t("div",$e,[(y(!0),T(X,null,H(w(u),F=>(y(),T("div",{key:F.id,class:"grid-span-1 text-center text-xs font-normal"},[t("div",ye,[t("div",ke,[t("img",{class:"max-w-full h-20 sm:h-28 object-cover mx-auto",alt:"",src:F.pic},null,8,Se)])])]))),128))])]),_:1}),$(E,{class:""},{default:B(()=>[t("div",Te,[(y(!0),T(X,null,H(w(l),F=>(y(),T("div",{key:F.id,class:"grid-span-1 text-center text-xs font-normal"},[t("div",Ae,[t("div",Ce,[t("img",{class:"max-w-full h-20 sm:h-28 object-cover mx-auto",alt:"",src:F.pic},null,8,Re)])])]))),128))])]),_:1})]),_:1},8,["onChange"]),t("div",De,[$(nt,{type:"primary",block:"",loading:w(r),onClick:C[0]||(C[0]=F=>w(R)())},{default:B(()=>[t("span",Fe,[j(d(p.$t("starting.Start"))+" ",1),t("span",Be,d(w(h)),1)])]),_:1},8,["loading"])])]),t("div",Ie,[t("div",Ne,[t("div",Le,d(p.$t("starting.Notice.title")),1)]),t("div",Ue,[t("div",Ge,d(p.$t("starting.Notice.date",[w(b)[0],w(b)[1]])),1),t("div",null,d(p.$t("starting.Notice.tips")),1)])])])]),$(bt,{ref_key:"TaskDialogRef",ref:i,onReset:w(U)},null,8,["onReset"]),$(zt,{ref_key:"AwardDialogRef",ref:v,onStart:w(k)},null,8,["onStart"]),$(ce,{ref_key:"FirstAwardDialogRef",ref:x,onStart:w(k)},null,8,["onStart"])])}}});const vs=M(je,[["__scopeId","data-v-5f73021a"]]);export{vs as default};
